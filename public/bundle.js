(()=>{"use strict";const e=["#388EE7","#6249CC","#40B681","#DE944E","#9C3A3A"],t=document.createElement("template");t.innerHTML='\n<style>\n  * {\n    box-sizing: border-box;\n    margin: 0;\n    font-family: sans-serif;\n    line-height: 1.5;\n  }\n  \n  span {\n    display: block;\n    text-wrap: nowrap;\n  }\n  .weather-item {\n    list-style: none;\n    position: relative;\n    cursor: pointer;\n    transition: transform 0.12s ease-in-out;\n    margin: auto;\n    max-width: 24rem;\n    padding-bottom: 1rem;\n  }\n  \n  .weather-item:hover {\n    transform: scale(0.98);\n  }\n  \n  .weather-item__close {\n    position: absolute;\n    right: 0;\n    height: 1.5rem;\n    width: 1.5rem;\n    border-radius: 0.2rem;\n    border-style: none;\n    padding: 0;\n    font-size: 1.6rem;\n    line-height: 1;\n    color: white;\n    background-color: inherit;\n    transition: transform 0.12s ease-in-out;\n    cursor: pointer;\n  }\n  \n  .weather-item__close:hover {\n    transform: scale(1.25);\n  }\n  \n  .weather-item__top {\n    background-color: #388ee7;\n    background-image: url("/images/weather-card-background.png");\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: bottom;\n    border-top-left-radius: 0.2rem;\n    border-top-right-radius: 0.2rem;\n    display: flex;\n    justify-content: space-between;\n    padding: 1rem;\n  }\n  \n  .weather-item__city-date {\n    text-align: center;\n  }\n  \n  .weather-item-top__left,\n  .weather-item-top__right {\n    height: 6rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n  }\n  \n  .weather-item__description {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-wrap: wrap;\n  }\n  \n  .weather-item__description img {\n    height: 2rem;\n  }\n  \n  .weather-item__description span {\n    text-wrap: wrap;\n  }\n  \n  .weather-item__temperature {\n    font-size: 3rem;\n    line-height: 1;\n  }\n  \n  .weather-item__tempMax,\n  .weather-item__tempMin,\n  .weather-item__date {\n    font-size: 0.8rem;\n  }\n  \n  .weather-item__bottom {\n    background-color: #383b47;\n    border-bottom-left-radius: 0.2rem;\n    border-bottom-right-radius: 0.2rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.6rem;\n  }\n  \n  .weather-item-bottom__left {\n    text-align: left;\n  }\n  \n  .weather-item-bottom__middle {\n    text-align: center;\n    border-left: 2px solid #515566;\n    border-right: 2px solid #515566;\n    margin: 1rem;\n    padding: 0 1rem;\n  }\n  \n  .weather-item-bottom__right {\n    text-align: right;\n  }\n  @media (min-width: 401px) and (max-width: 768px) {\n    .weather-item__top {\n      column-gap: 5rem;\n    }\n  }\n  \n  @media (min-width: 769px) and (max-width: 1024px) {\n    .weather-item {\n      margin: 0;\n      width: 22rem;\n      padding-bottom: 0;\n    }\n  }\n  \n  @media (min-width: 1025px) and (max-width: 1199px) {\n    .weather-item {\n      margin: 0;\n      width: 30rem;\n      padding-bottom: 0;\n    }\n  \n    .weather-item__top {\n      border-top-left-radius: 0.5rem;\n      border-top-right-radius: 0.5rem;\n      padding: 2rem;\n      height: 10rem;\n    }\n  \n    .weather-item__bottom {\n      background-color: #383b47;\n      border-bottom-left-radius: 0.5rem;\n      border-bottom-right-radius: 0.5rem;\n      height: 6rem;\n      font-size: 0.7rem;\n    }\n  }\n  \n  @media (min-width: 1199px) {\n    .weather-item {\n      margin: 0;\n      width: 30rem;\n      padding-bottom: 0;\n    }\n  \n    .weather-item__top {\n      border-top-left-radius: 0.5rem;\n      border-top-right-radius: 0.5rem;\n      padding: 2rem;\n      height: 10rem;\n    }\n  \n    .weather-item__bottom {\n      background-color: #383b47;\n      border-bottom-left-radius: 0.5rem;\n      border-bottom-right-radius: 0.5rem;\n      height: 6rem;\n      font-size: 0.7rem;\n    }\n  }\n\n</style>\n<li class="weather-item">\n    <button class="weather-item__close" type="button">&times;</button>\n    <section class="weather-item__top">\n    <div class="weather-item-top__left">\n        <div class="weather-item__city-date">\n            <h3 class="weather-item__city"></h3>\n            <span class="weather-item__date"></span>\n        </div>\n        <div class="weather-item__description">\n            <img alt="image" class="weather-description__image"/>\n            <span class="weather-description"></span>\n        </div>\n    </div>\n    <div class="weather-item-top__right">\n        <span class="weather-item__temperature"></span>\n        <div class="weather-item__minmaxtemp">\n            <span class="weather-item__tempMin"></span>\n            <span class="weather-item__tempMax"></span>\n        </div>\n    </div>\n    </section>\n    <section class="weather-item__bottom">\n        <div class="weather-item-bottom__left">\n            <span class="weather-item__pressure"></span>\n            <span class="weather-item__humidity"></span>\n            <span class="weather-item__visibility"></span>\n        </div>\n        <div class="weather-item-bottom__middle">\n            <img src="/images/direction.png" alt="image" />\n            <span class="weather-item__wind-details"></span>\n        </div>\n        <div class="weather-item-bottom__right">\n            <span class="weather-item__sunrise"></span>\n            <span class="weather-item__sunset"></span>\n        </div>\n    </section>\n</li>\n';class n extends HTMLElement{static cardNumber=0;constructor(r){super(),n.cardNumber++,this.colorId=n.cardNumber,this._cityName=r.cityName,this._country=r.country,this._temperature=r.temperature,this._minTemp=r.minTemp,this._maxTemp=r.maxTemp,this._pressure=r.pressure,this._humidity=r.humidity,this._visibility=r.visibility,this._windSpeed=r.windSpeed,this._windDirection=r.windDirection,this._time=r.time,this._date=r.date,this._sunrise=r.sunrise,this._sunset=r.sunset,this._description=r.description,this._iconURL=r.iconURL,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.shadowRoot.querySelector(".weather-item__top").style.backgroundColor=e[this.colorId%5],this.shadowRoot.querySelector(".weather-item").setAttribute("id",this.colorId),this.shadowRoot.querySelector(".weather-item__city").textContent=`${this._cityName}, ${this._country}`,this.shadowRoot.querySelector(".weather-item__date").textContent=`${this._time}, ${this._date}`,this.shadowRoot.querySelector(".weather-item__temperature").innerHTML=`${this._temperature}&deg;c`,this.shadowRoot.querySelector(".weather-description__image").src=`${this._iconURL}`,this.shadowRoot.querySelector(".weather-description").textContent=`${this._description}`,this.shadowRoot.querySelector(".weather-item__tempMin").innerHTML=`<b>Temp Min:</b> ${this._minTemp}&deg;c`,this.shadowRoot.querySelector(".weather-item__tempMax").innerHTML=`<b>Temp Max:</b> ${this._maxTemp}&deg;c`,this.shadowRoot.querySelector(".weather-item__pressure").innerHTML=`<b>Pressure: </b>${this._pressure}hPa`,this.shadowRoot.querySelector(".weather-item__humidity").innerHTML=`<b>Humidity: </b>${this._humidity}%`,this.shadowRoot.querySelector(".weather-item__visibility").innerHTML=`<b>Visibility: </b>${this._visibility}km`,this.shadowRoot.querySelector(".weather-item__wind-details").textContent=`${this._windSpeed}m/s ${this._windDirection} degrees`,this.shadowRoot.querySelector(".weather-item__sunrise").innerHTML=`<b>Sunrise: </b>${this._sunrise}`,this.shadowRoot.querySelector(".weather-item__sunset").innerHTML=`<b>Sunset: </b>${this._sunset}`}connectedCallback(){this.addEventListener("click",(()=>{const e=new CustomEvent("show-large-card");this.dispatchEvent(e)}))}hideSmallCardList=()=>{this.parentElement.style.display="none"};showSmallCardList=()=>{this.parentElement.style.display="flex"}}customElements.define("small-card",n);const r=["#388EE7","#6249CC","#40B681","#DE944E","#9C3A3A"],i=document.createElement("template");i.innerHTML='\n<style>\n  * {\n    box-sizing: border-box;\n    margin: 0;\n    font-family: sans-serif;\n    line-height: 1.5;\n  }\n  \n  span {\n    display: block;\n    text-wrap: nowrap;\n  }\n .weather-item__large-card {\n    padding: 0.5rem;\n    position: relative;\n    margin-top: 5rem;\n  }\n  \n  .weather-item-large-card__back {\n    position: absolute;\n    padding: 0 1rem;\n    border-radius: 0.25rem;\n    border-style: none;\n    font-size: 1.5rem;\n    background-color: inherit;\n    color: white;\n  }\n  \n  .weather-item-large-card__back span {\n    transition: transform 0.12s ease-in-out;\n  }\n\n  .weather-item-large-card__back span:hover {\n    transform: scale(1.2);\n  }\n  \n  .weather-item-large__top {\n    background-color: #388ee7;\n    padding: 0 0  2rem 0;\n    border-top-left-radius: 0.25rem;\n    border-top-right-radius: 0.25rem;\n  }\n  \n  .weather-item-large-top__top {\n    padding-top: 2rem;\n    text-align: center;\n  }\n  \n  .weather-item-large-top__bottom {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding-top: 1rem;\n  }\n  \n  .weather-item-large-top-bottom__weather-description {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding-right: 1rem;\n  }\n  \n  .weather-item-large-top-bottom__weather-description img {\n    height: 4rem;\n  }\n  \n  .weather-item-large-top-bottom__temperatures {\n    text-align: center;\n    border-left: 2px solid #ececec;\n    padding-left: 1rem;\n  }\n  \n  .weather-item-large__temperature {\n    font-size: 3rem;\n    line-height: 1;\n  }\n  \n  .weather-item-large__bottom {\n    background-color: #383b47;\n    border-bottom-left-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n    display: flex;\n    font-size: 0.7rem;\n    justify-content: center;\n    align-items: center;\n    padding: 1rem 0;\n  }\n  \n  .weather-item-large-bottom__left {\n    text-align: left;\n    padding-right: 1rem;\n    text-wrap: nowrap;\n  }\n  \n  .weather-item-large-bottom__middle {\n    padding: 0 0.5rem;\n    text-align: center;\n    border-left: 2px solid #515566;\n    border-right: 2px solid #515566;\n    text-wrap: nowrap;\n  }\n  \n  .weather-item-large-bottom__right {\n    text-align: right;\n    padding-left: 1rem;\n    text-wrap: nowrap;\n  }\n  \n  @media (min-width: 481px) and (max-width: 768px) {\n    .weather-item__large-card {\n      padding: 0.5rem 2rem;\n    }\n  }\n  \n  @media (min-width: 769px) and (max-width: 1024px) {\n    .weather-item__large-card {\n      padding: 0.5rem 4rem;\n    }\n  \n    .weather-item-large-top-bottom__weather-description {\n      padding-right: 1rem;\n    }\n  \n    .weather-item-large-top-bottom__temperatures {\n      padding-left: 1rem;\n    }\n  \n    .weather-item-large-bottom__left {\n      padding-right: 1rem;\n    }\n  \n    .weather-item-large-bottom__middle {\n      padding: 0 0.5rem;\n    }\n  \n    .weather-item-large-bottom__right {\n      padding-left: 1rem;\n    }\n  \n    .weather-item-large__bottom {\n      font-size: 1rem;\n    }\n  }\n  \n  @media (min-width: 1025px) and (max-width: 1200px) {\n    .weather-item__large-card {\n      padding: 0.5rem 6rem;\n    }\n  \n    .weather-item-large__top {\n      padding: 0 0 2rem 0;\n      border-top-left-radius: 0.5rem;\n      border-top-right-radius: 0.5rem;\n    }\n  \n    .weather-item-large-card__back {\n      border-radius: 0.5rem;\n    }\n  \n    .weather-item-large-top-bottom__weather-description {\n      padding-right: 3rem;\n    }\n  \n    .weather-item-large-top-bottom__temperatures {\n      padding-left: 3rem;\n    }\n  \n    .weather-item-large-bottom__left {\n      padding-right: 3rem;\n    }\n  \n    .weather-item-large-bottom__middle {\n      padding: 0 2rem;\n    }\n  \n    .weather-item-large-bottom__right {\n      padding-left: 3rem;\n    }\n  \n    .weather-item-large__bottom {\n      font-size: 1rem;\n      border-bottom-left-radius: 0.5rem;\n      border-bottom-right-radius: 0.5rem;\n    }\n  }\n  \n  @media (min-width: 1201px) {\n    .weather-item__large-card {\n      padding: 0.5rem 10rem;\n    }\n  \n    .weather-item-large-card__back {\n      border-radius: 0.5rem;\n    }\n  \n    .weather-item-large__top {\n      padding: 0 0 3rem 0;\n      border-top-left-radius: 0.5rem;\n      border-top-right-radius: 0.5rem;\n    }\n  \n    .weather-item-large-top__top {\n      padding-bottom: 2rem;\n    }\n  \n    .weather-item-large-top-bottom__weather-description {\n      padding-right: 4rem;\n    }\n  \n    .weather-item-large-top-bottom__temperatures {\n      padding-left: 4rem;\n    }\n  \n    .weather-item-large-bottom__left {\n      padding-right: 4rem;\n    }\n  \n    .weather-item-large-bottom__middle {\n      padding: 0 4rem;\n    }\n  \n    .weather-item-large-bottom__right {\n      padding-left: 4rem;\n    }\n  \n    .weather-item-large__bottom {\n      border-bottom-left-radius: 0.5rem;\n      border-bottom-right-radius: 0.5rem;\n      font-size: 1rem;\n    }\n  }\n</style>\n<div class="weather-item__large-card">\n    <section class="weather-item-large__top" >\n        <button class="weather-item-large-card__back" type="button"><span>&larr;</span></button>\n        <div class="weather-item-large-top__top">\n            <h2 class="weather-item-large__city"></h2>\n            <span class="weather-item-large__date"></span>\n        </div>\n        <div class="weather-item-large-top__bottom">\n            <div class="weather-item-large-top-bottom__weather-description">\n                <img alt="image" class="weather-description__image-large">\n                <span class="weather-description__large"></span>\n            </div>\n            <div class="weather-item-large-top-bottom__temperatures">\n                <span class="weather-item-large__temperature"></span>\n                <span class="weather-item-large__temperature-min"></span>\n                <span class="weather-item-large__temperature-max"></span>\n            </div>\n        </div>\n    </section>\n    <section class="weather-item-large__bottom">\n        <div class="weather-item-large-bottom__left">\n            <span class="weather-item-large__pressure"></span>\n            <span class="weather-item-large__humidity"></span>\n            <span class="weather-item-large__visibility"></span>\n        </div>\n        <div class="weather-item-large-bottom__middle">\n            <img src="/images/direction.png" alt="image" />\n            <span class="weather-item-large__wind-details"></span>\n        </div>\n        <div class="weather-item-large-bottom__right">\n            <span class="weather-item-large__sunrise"></span>\n            <span class="weather-item-large__sunset"></span>\n        </div>\n    </section>\n</div>\n';class a extends HTMLElement{static cardNumber=0;constructor(e){super(),a.cardNumber++,this.colorId=a.cardNumber,this._cityName=e.cityName,this._country=e.country,this._temperature=e.temperature,this._minTemp=e.minTemp,this._maxTemp=e.maxTemp,this._pressure=e.pressure,this._humidity=e.humidity,this._visibility=e.visibility,this._windSpeed=e.windSpeed,this._windDirection=e.windDirection,this._time=e.time,this._date=e.date,this._sunrise=e.sunrise,this._sunset=e.sunset,this._description=e.description,this._iconURL=e.iconURL,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(i.content.cloneNode(!0)),this.shadowRoot.querySelector(".weather-item-large__top").style.backgroundColor=r[this.colorId%5],this.shadowRoot.querySelector(".weather-item__large-card").setAttribute("id",this.colorId),this.shadowRoot.querySelector(".weather-item-large__city").textContent=`${this._cityName}, ${this._country}`,this.shadowRoot.querySelector(".weather-item-large__date").textContent=`${this._time}, ${this._date}`,this.shadowRoot.querySelector(".weather-item-large__temperature").innerHTML=`${this._temperature}&deg;c`,this.shadowRoot.querySelector(".weather-description__image-large").src=`${this._iconURL}`,this.shadowRoot.querySelector(".weather-description__large").textContent=`${this._description}`,this.shadowRoot.querySelector(".weather-item-large__temperature-min").innerHTML=`<b>Temp Min:</b> ${this._minTemp}&deg;c`,this.shadowRoot.querySelector(".weather-item-large__temperature-max").innerHTML=`<b>Temp Max:</b> ${this._maxTemp}&deg;c`,this.shadowRoot.querySelector(".weather-item-large__pressure").innerHTML=`<b>Pressure: </b>${this._pressure}hPa`,this.shadowRoot.querySelector(".weather-item-large__humidity").innerHTML=`<b>Humidity: </b>${this._humidity}%`,this.shadowRoot.querySelector(".weather-item-large__visibility").innerHTML=`<b>Visibility: </b>${this._visibility}km`,this.shadowRoot.querySelector(".weather-item-large__wind-details").textContent=`${this._windSpeed}m/s ${this._windDirection} degrees`,this.shadowRoot.querySelector(".weather-item-large__sunrise").innerHTML=`<b>Sunrise: </b>${this._sunrise}`,this.shadowRoot.querySelector(".weather-item-large__sunset").innerHTML=`<b>Sunset: </b>${this._sunset}`}connectedCallback(){this.shadowRoot.querySelector(".weather-item-large-card__back").addEventListener("click",(()=>{const e=new CustomEvent("show-small-cards");this.dispatchEvent(e)}))}showLargeCard=()=>{document.querySelector(".weather-container").appendChild(this)};backBtnHandler=()=>{document.querySelector(".weather-container").removeChild(this)}}customElements.define("large-card",a);const o=function(e,t){const n=new Date(1e3*e+1e3*t).toUTCString().split(" "),r=n[2]+" "+n[1],i=n[4].split(":"),a=i[0];return{date:r,time:`${a%12==0?12:a%12}:${i[1]}${a>12?"pm":"am"}`}};window.addEventListener("load",(()=>{s()}));const s=async function(){try{const e=await async function(){const e=[];console.log("Trying to fetch city codes...");try{const t=await fetch("/data/cities.json");return(await t.json()).List.forEach((t=>e.push(t.CityCode))),console.log("Fetching city codes successful..."),e}catch(e){console.log(e),console.error(e)}}();await async function(e){const t=Date.now();let n=null!=localStorage.getItem("oldTime")&&t>=Number(localStorage.getItem("oldTime"))+5e3,r=null===localStorage.getItem("oldTime")&&null===localStorage.getItem("cityData");if(r||n){r||(localStorage.removeItem("oldTime"),localStorage.removeItem("cityData")),localStorage.setItem("oldTime",t);try{const t=await async function(e){const t=`http://api.openweathermap.org/data/2.5/group?id=${e.join()}&units=metric&appid=72d608564b7620acf0b6c74125e6f59c`;try{const e=await fetch(t),n=await e.json();if(401==e.status||404==e.status||429==e.status||500==e.status||502==e.status||503==e.status||504==e.status)throw new Error(`${e.status}: ${e.statusText}`);return n.list}catch(e){console.error(e),console.log(e)}}(e);if(!t)throw localStorage.removeItem("oldTime"),localStorage.removeItem("cityData"),new Error("Data caching unsuccessful");localStorage.setItem("cityData",JSON.stringify(t)),console.log("caching data successful...")}catch(e){console.error(e),console.log(e)}}}(e);(function(e){try{const t=[],n=e;for(let e=0;e<n.length;e++){let r=n[e].name,i=n[e].sys.country,a=Math.round(n[e].main.temp),s=Math.round(n[e].main.temp_min),m=Math.round(n[e].main.temp_max),d=n[e].main.pressure,h=n[e].main.humidity,l=(n[e].visibility/1e3).toFixed(2),c=n[e].wind.speed.toFixed(1),_=n[e].wind.deg,p=n[e].sys.timezone;const g={cityName:r,country:i,temperature:a,minTemp:s,maxTemp:m,pressure:d,humidity:h,visibility:l,windSpeed:c,windDirection:_,time:o(n[e].dt,p).time,date:o(n[e].dt,p).date,sunrise:o(n[e].sys.sunrise,p).time,sunset:o(n[e].sys.sunset,p).time,description:n[e].weather[n[e].weather.length-1].description.trim().split(" ").map((e=>e.charAt(0).toUpperCase().concat(e.substring(1,e.length)))).join(" "),iconURL:`https://openweathermap.org/img/wn/${n[e].weather[n[e].weather.length-1].icon}@2x.png`};t.push(g)}return t}catch(e){console.error(e),console.log(e)}})(await function(e){const t=localStorage.getItem("cityData");return JSON.parse(t)}()).forEach((e=>{let t=new n(e),r=new a(e);t.addEventListener("show-large-card",(()=>{t.hideSmallCardList(),r.showLargeCard()})),r.addEventListener("show-small-cards",(()=>{r.backBtnHandler(),t.showSmallCardList()})),document.querySelector(".weather-container__items").appendChild(t)}))}catch(e){const t=document.createElement("div");t.textContent=`${e}`,document.appendChild(t),console.error(e),console.log("Data cannot be loaded...")}}})();